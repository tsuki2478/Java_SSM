<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.hd.mapper.WorkorderMapper">
	<resultMap id="BaseResultMap" type="cn.hd.model.Workorder">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Apr 14 
			09:14:35 CST 2017. -->
		<id column="workorderid" property="workorderid" jdbcType="VARCHAR" />
		<result column="customerid" property="customerid" jdbcType="INTEGER" />
		<result column="customername" property="customername" jdbcType="VARCHAR" />
		<result column="centificatenumber" property="centificatenumber"
			jdbcType="VARCHAR" />
		<result column="aging" property="aging" jdbcType="INTEGER" />
		<result column="problemtype" property="problemtype" jdbcType="VARCHAR" />
		<result column="handlegroup" property="handlegroup" jdbcType="INTEGER" />
		<result column="handleperson" property="handleperson" jdbcType="INTEGER" />
		<result column="urgencylevel" property="urgencylevel" jdbcType="VARCHAR" />
		<result column="status" property="status" jdbcType="INTEGER" />
		<result column="creatdate" property="creatdate" jdbcType="TIMESTAMP" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Apr 14 
			09:14:35 CST 2017. -->
		workorderid, customerid, customername, centificatenumber, aging,
		problemtype, handlegroup,
		handleperson, urgencylevel, status, creatdate
	</sql>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Apr 14 
			09:14:35 CST 2017. -->
		select
		<include refid="Base_Column_List" />
		from t_workorder
		where workorderid = #{workorderid,jdbcType=VARCHAR}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Apr 14 
			09:14:35 CST 2017. -->
		delete from t_workorder
		where workorderid = #{workorderid,jdbcType=VARCHAR}
	</delete>
	<insert id="insert" parameterType="cn.hd.model.Workorder">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Apr 14 
			09:14:35 CST 2017. -->
		insert into t_workorder (workorderid, customerid, customername,
		centificatenumber, aging, problemtype,
		handlegroup, handleperson, urgencylevel,
		status, creatdate)
		values (#{workorderid,jdbcType=VARCHAR}, #{customerid,jdbcType=INTEGER},
		#{customername,jdbcType=VARCHAR},
		#{centificatenumber,jdbcType=VARCHAR}, #{aging,jdbcType=INTEGER},
		#{problemtype,jdbcType=VARCHAR},
		#{handlegroup,jdbcType=INTEGER}, #{handleperson,jdbcType=INTEGER}, #{urgencylevel,jdbcType=VARCHAR},
		#{status,jdbcType=INTEGER}, #{creatdate,jdbcType=TIMESTAMP})
	</insert>
	<insert id="insertSelective" parameterType="cn.hd.model.Workorder">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Apr 14 
			09:14:35 CST 2017. -->
		insert into t_workorder
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="workorderid != null">
				workorderid,
			</if>
			<if test="customerid != null">
				customerid,
			</if>
			<if test="customername != null">
				customername,
			</if>
			<if test="centificatenumber != null">
				centificatenumber,
			</if>
			<if test="aging != null">
				aging,
			</if>
			<if test="problemtype != null">
				problemtype,
			</if>
			<if test="handlegroup != null">
				handlegroup,
			</if>
			<if test="handleperson != null">
				handleperson,
			</if>
			<if test="urgencylevel != null">
				urgencylevel,
			</if>
			<if test="status != null">
				status,
			</if>
			<if test="creatdate != null">
				creatdate,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="workorderid != null">
				#{workorderid,jdbcType=VARCHAR},
			</if>
			<if test="customerid != null">
				#{customerid,jdbcType=INTEGER},
			</if>
			<if test="customername != null">
				#{customername,jdbcType=VARCHAR},
			</if>
			<if test="centificatenumber != null">
				#{centificatenumber,jdbcType=VARCHAR},
			</if>
			<if test="aging != null">
				#{aging,jdbcType=INTEGER},
			</if>
			<if test="problemtype != null">
				#{problemtype,jdbcType=VARCHAR},
			</if>
			<if test="handlegroup != null">
				#{handlegroup,jdbcType=INTEGER},
			</if>
			<if test="handleperson != null">
				#{handleperson,jdbcType=INTEGER},
			</if>
			<if test="urgencylevel != null">
				#{urgencylevel,jdbcType=VARCHAR},
			</if>
			<if test="status != null">
				#{status,jdbcType=INTEGER},
			</if>
			<if test="creatdate != null">
				#{creatdate,jdbcType=TIMESTAMP},
			</if>
		</trim>
	</insert>
	
	 <update id="updateByPrimaryKeySelective" parameterType="cn.hd.model.Workorder" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Apr 14 09:14:35 CST 2017.
    -->
    update t_workorder
    <set >
      <if test="customerid != null" >
        customerid = #{customerid,jdbcType=INTEGER},
      </if>
      <if test="customername != null" >
        customername = #{customername,jdbcType=VARCHAR},
      </if>
      <if test="centificatenumber != null" >
        centificatenumber = #{centificatenumber,jdbcType=VARCHAR},
      </if>
      <if test="aging != null" >
        aging = #{aging,jdbcType=INTEGER},
      </if>
      <if test="problemtype != null" >
        problemtype = #{problemtype,jdbcType=VARCHAR},
      </if>
      <if test="handlegroup != null and handlegroup>0" >
        handlegroup = #{handlegroup,jdbcType=INTEGER},
      </if>
      <if test="handleperson != null and handleperson>0" >
        handleperson = #{handleperson,jdbcType=INTEGER},
      </if>
      <if test="urgencylevel != null" >
        urgencylevel = #{urgencylevel,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="creatdate != null" >
        creatdate = #{creatdate,jdbcType=TIMESTAMP},
      </if>
    </set>
    where workorderid = #{workorderid,jdbcType=VARCHAR}
  </update>
	
	<update id="updateByPrimaryKey" parameterType="cn.hd.model.Workorder">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Apr 14 
			09:14:35 CST 2017. -->
		update t_workorder
		set customerid = #{customerid,jdbcType=INTEGER},
		customername = #{customername,jdbcType=VARCHAR},
		centificatenumber = #{centificatenumber,jdbcType=VARCHAR},
		aging = #{aging,jdbcType=INTEGER},
		problemtype = #{problemtype,jdbcType=VARCHAR},
		handlegroup = #{handlegroup,jdbcType=INTEGER},
		handleperson = #{handleperson,jdbcType=INTEGER},
		urgencylevel = #{urgencylevel,jdbcType=VARCHAR},
		status = #{status,jdbcType=INTEGER},
		creatdate = #{creatdate,jdbcType=TIMESTAMP}
		where workorderid = #{workorderid,jdbcType=VARCHAR}
	</update>
	<select id="query" parameterType="Workorder" resultType="Workorder">
		select
		t1.workorderid,
		t1.customername,
		t1.centificatenumber,
		t1.problemtype,
		t2.`name` as problemtypeName ,
		t1.handlegroup,
		t3.`name` as handlegroupName,
		t1.handleperson ,
		t4.USERNAME as handlepersonName,
		t1.urgencylevel,
		t5.name as urgencylevelName,
		t1.`status`,
		t1.creatdate

		from t_workorder t1
		left join t_data t2 on t2.id=t1.problemtype
		left join t_dept t3 on t3.id=t1.handlegroup
		left join t_user t4 on t4.userid=t1.handleperson
		left join t_data t5 on t5.id=t1.urgencylevel
		left join t_customer t6 on t6.id=t1.customerid
		 <where>
           <if test="workorderid!=null and workorderid!=''">
             and t1.workorderid like "%"#{workorderid}"%"
           </if>
           <if test="customername!=null and customername!=''">
             and t1.customername like "%"#{customername}"%"
           </if>
            <if test="centificatenumber!=null and centificatenumber!=''">
             and t1.centificatenumber like "%"#{centificatenumber}"%"
           </if>
            <if test="customer!=null and customer.telephone!=null and customer.telephone!=''">
             and t6.telephone like "%"	#{customer.telephone}"%"
           </if>
           <if test="handlegroup!=null and handlegroup>0">
           and  t1.handlegroup= #{handlegroup}
          </if>
          <if test="handleperson!=null and handleperson>0">
           and  t1.handleperson = #{handleperson}
          </if>
           <if test="status!=null">
           and  t1.status = #{status}
          </if>
       </where>
	</select>
</mapper>